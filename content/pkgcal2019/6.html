---
title: "Naughty List"
author: "Emil Hvitfeldt"
slug: "6"
output: 
  html_document:
    css: "calendar.css"
showonlyimage: true
description: " "
type: packagecalendar
layout:: single
---



<html>
<link rel="stylesheet" href="/css/calendar-post.css"/>
</html>
<section class="navigation">
<div class="nav-container">
<nav>
<ul class="nav-list">
<li>
<a href="/">Home</a>
</li>
<li>
<a href="/packagecalendar/2019/">Back</a>
</li>
</ul>
</nav>
</div>
</section>
<div id="day-6-skimr" class="section level1">
<h1>Day 6: skimr</h1>
<p>Welcome back for the 6th day of the <a href="https://twitter.com/hashtag/packagecalendar">#packagecalendar</a>,
When you get a new dataset it is important to do some exploratory data analysis.
One of my first tools I reach at is the <a href="https://github.com/ropensci/skimr">skimr</a> package by <a href="https://twitter.com/rOpenSci">rOpenSci</a>.</p>
<p>the package is available from CRAN and can be downloaded with</p>
<pre class="r"><code>install.packages(&quot;skimr&quot;)</code></pre>
<p>To illustrate the package we will be using the festive dataset on <a href="https://www.kaggle.com/sharkbait1223/billboard-top-100-christmas-carol-dataset/data">Billboard Top 100 Christmas Carol Dataset</a>.</p>
<pre class="r"><code>billboards &lt;- read.csv(&quot;~/Downloads/christmas_billboard_data.csv&quot;)</code></pre>
<p>Traditionally I would have simply printed the data.frame</p>
<pre class="r"><code>billboards</code></pre>
<pre><code>##                                                  url     weekid week_position
## 1 http://www.billboard.com/charts/hot-100/1958-12-13 12/13/1958            83
## 2 http://www.billboard.com/charts/hot-100/1958-12-20 12/20/1958            57
## 3 http://www.billboard.com/charts/hot-100/1958-12-20 12/20/1958            73
## 4 http://www.billboard.com/charts/hot-100/1958-12-20 12/20/1958            86
## 5 http://www.billboard.com/charts/hot-100/1958-12-27 12/27/1958            44
## 6 http://www.billboard.com/charts/hot-100/1958-12-27 12/27/1958            66
##               song    performer                      songid instance
## 1  RUN RUDOLPH RUN  Chuck Berry  Run Rudolph RunChuck Berry        1
## 2 JINGLE BELL ROCK  Bobby Helms Jingle Bell RockBobby Helms        1
## 3  RUN RUDOLPH RUN  Chuck Berry  Run Rudolph RunChuck Berry        1
## 4  WHITE CHRISTMAS  Bing Crosby  White ChristmasBing Crosby        1
## 5  GREEN CHRI$TMA$ Stan Freberg Green Chri$tma$Stan Freberg        1
## 6  WHITE CHRISTMAS  Bing Crosby  White ChristmasBing Crosby        1
##   previous_week_position peak_position weeks_on_chart year month day
## 1                     NA            69              3 1958    12  13
## 2                     NA            29             19 1958    12  20
## 3                     83            69              3 1958    12  20
## 4                     NA            12             13 1958    12  20
## 5                     NA            44              2 1958    12  27
## 6                     86            12             13 1958    12  27</code></pre>
<p>used <code>summary()</code></p>
<pre class="r"><code>summary(billboards)
##                                                  url             weekid   
##  http://www.billboard.com/charts/hot-100/1960-12-17: 10   12/17/1960: 10  
##  http://www.billboard.com/charts/hot-100/1962-12-22:  9   12/22/1962:  9  
##  http://www.billboard.com/charts/hot-100/1960-12-24:  8   1/6/1962  :  8  
##  http://www.billboard.com/charts/hot-100/1961-12-23:  8   1/7/2017  :  8  
##  http://www.billboard.com/charts/hot-100/1961-12-30:  8   12/15/1962:  8  
##  http://www.billboard.com/charts/hot-100/1962-01-06:  8   12/23/1961:  8  
##  (Other)                                           :336   (Other)   :336  
##  week_position                                            song    
##  Min.   :  7.0   JINGLE BELL ROCK                           : 28  
##  1st Qu.: 38.5   ALL I WANT FOR CHRISTMAS IS YOU            : 20  
##  Median : 58.0   ROCKIN&#39; AROUND THE CHRISTMAS TREE          : 19  
##  Mean   : 57.2   THE CHIPMUNK SONG (CHRISTMAS DON&#39;T BE LATE): 16  
##  3rd Qu.: 78.0   WHITE CHRISTMAS                            : 16  
##  Max.   :100.0   MISTLETOE                                  : 14  
##                  (Other)                                    :274  
##                            performer  
##  Bobby Helms                    : 20  
##  Mariah Carey                   : 20  
##  Brenda Lee                     : 19  
##  Bing Crosby                    : 16  
##  David Seville And The Chipmunks: 16  
##  Goo Goo Dolls                  : 13  
##  (Other)                        :283  
##                                                                         songid   
##  Jingle Bell RockBobby Helms                                               : 20  
##  All I Want For Christmas Is YouMariah Carey                               : 19  
##  Rockin&#39; Around The Christmas TreeBrenda Lee                               : 19  
##  The Chipmunk Song (Christmas Don&#39;t Be Late)David Seville And The Chipmunks: 16  
##  White ChristmasBing Crosby                                                : 14  
##  Better DaysGoo Goo Dolls                                                  : 13  
##  (Other)                                                                   :286  
##     instance     previous_week_position peak_position    weeks_on_chart  
##  Min.   :1.000   Min.   :  7.00         Min.   :  7.00   Min.   : 1.000  
##  1st Qu.:1.000   1st Qu.: 35.00         1st Qu.: 14.00   1st Qu.: 5.000  
##  Median :1.000   Median : 57.00         Median : 34.00   Median : 8.000  
##  Mean   :1.587   Mean   : 55.52         Mean   : 37.53   Mean   : 9.646  
##  3rd Qu.:1.000   3rd Qu.: 75.00         3rd Qu.: 53.50   3rd Qu.:15.000  
##  Max.   :6.000   Max.   :100.00         Max.   :100.00   Max.   :20.000  
##                  NA&#39;s   :108                                             
##       year          month             day       
##  Min.   :1958   Min.   : 1.000   Min.   : 1.00  
##  1st Qu.:1962   1st Qu.: 1.000   1st Qu.: 9.00  
##  Median :1975   Median :12.000   Median :17.00  
##  Mean   :1982   Mean   : 7.755   Mean   :16.67  
##  3rd Qu.:2005   3rd Qu.:12.000   3rd Qu.:24.00  
##  Max.   :2017   Max.   :12.000   Max.   :31.00  
## </code></pre>
<p>or used the structure function <code>str()</code></p>
<pre class="r"><code>str(billboards)
## &#39;data.frame&#39;:    387 obs. of  13 variables:
##  $ url                   : Factor w/ 206 levels &quot;http://www.billboard.com/charts/hot-100/1958-12-13&quot;,..: 1 2 2 2 3 3 3 3 4 4 ...
##  $ weekid                : Factor w/ 206 levels &quot;1/1/1994&quot;,&quot;1/1/2000&quot;,..: 111 137 137 137 167 167 167 167 54 54 ...
##  $ week_position         : int  83 57 73 86 44 66 69 35 45 53 ...
##  $ song                  : Factor w/ 70 levels &quot;A GREAT BIG SLED&quot;,..: 45 31 45 69 21 69 45 31 31 21 ...
##  $ performer             : Factor w/ 69 levels &quot;98 Degrees&quot;,&quot;Aly &amp; AJ&quot;,..: 18 9 18 6 56 6 18 9 9 56 ...
##  $ songid                : Factor w/ 78 levels &quot;A Great Big SledThe Killers Featuring Toni Halliday&quot;,..: 52 33 52 76 23 76 52 33 33 23 ...
##  $ instance              : int  1 1 1 1 1 1 1 1 1 1 ...
##  $ previous_week_position: int  NA NA 83 NA NA 86 73 57 35 44 ...
##  $ peak_position         : int  69 29 69 12 44 12 69 29 29 44 ...
##  $ weeks_on_chart        : int  3 19 3 13 2 13 3 19 19 2 ...
##  $ year                  : int  1958 1958 1958 1958 1958 1958 1958 1958 1959 1959 ...
##  $ month                 : int  12 12 12 12 12 12 12 12 1 1 ...
##  $ day                   : int  13 20 20 20 27 27 27 27 3 3 ...</code></pre>
<p>while they all give good information they all lack in one way or another,
and I tend to go back and forth between the different functions.
Introducing <strong>skimr</strong>, the main function <code>skim()</code> gives a nice overview of the data.
Complete with top-level statistics, and column statistics sorted by column type.</p>
<pre class="r"><code>library(skimr)
skim(billboards)</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-8">Table 1: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">billboards</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">387</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">13</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">factor</td>
<td align="left">5</td>
</tr>
<tr class="odd">
<td align="left">numeric</td>
<td align="left">8</td>
</tr>
<tr class="even">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="left">ordered</th>
<th align="right">n_unique</th>
<th align="left">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">url</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">206</td>
<td align="left">htt: 10, htt: 9, htt: 8, htt: 8</td>
</tr>
<tr class="even">
<td align="left">weekid</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">206</td>
<td align="left">12/: 10, 12/: 9, 1/6: 8, 1/7: 8</td>
</tr>
<tr class="odd">
<td align="left">song</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">70</td>
<td align="left">JIN: 28, ALL: 20, ROC: 19, THE: 16</td>
</tr>
<tr class="even">
<td align="left">performer</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">69</td>
<td align="left">Bob: 20, Mar: 20, Bre: 19, Bin: 16</td>
</tr>
<tr class="odd">
<td align="left">songid</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="left">FALSE</td>
<td align="right">78</td>
<td align="left">Jin: 20, All: 19, Roc: 19, The: 16</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">week_position</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">57.20</td>
<td align="right">25.40</td>
<td align="right">7</td>
<td align="right">38.5</td>
<td align="right">58</td>
<td align="right">78.0</td>
<td align="right">100</td>
<td align="left">▅▆▇▇▇</td>
</tr>
<tr class="even">
<td align="left">instance</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1.59</td>
<td align="right">1.25</td>
<td align="right">1</td>
<td align="right">1.0</td>
<td align="right">1</td>
<td align="right">1.0</td>
<td align="right">6</td>
<td align="left">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td align="left">previous_week_position</td>
<td align="right">108</td>
<td align="right">0.72</td>
<td align="right">55.52</td>
<td align="right">25.15</td>
<td align="right">7</td>
<td align="right">35.0</td>
<td align="right">57</td>
<td align="right">75.0</td>
<td align="right">100</td>
<td align="left">▅▆▇▇▆</td>
</tr>
<tr class="even">
<td align="left">peak_position</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">37.53</td>
<td align="right">24.76</td>
<td align="right">7</td>
<td align="right">14.0</td>
<td align="right">34</td>
<td align="right">53.5</td>
<td align="right">100</td>
<td align="left">▇▆▃▂▂</td>
</tr>
<tr class="odd">
<td align="left">weeks_on_chart</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">9.65</td>
<td align="right">6.14</td>
<td align="right">1</td>
<td align="right">5.0</td>
<td align="right">8</td>
<td align="right">15.0</td>
<td align="right">20</td>
<td align="left">▆▇▃▃▆</td>
</tr>
<tr class="even">
<td align="left">year</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">1982.06</td>
<td align="right">21.12</td>
<td align="right">1958</td>
<td align="right">1962.0</td>
<td align="right">1975</td>
<td align="right">2005.0</td>
<td align="right">2017</td>
<td align="left">▇▃▁▂▅</td>
</tr>
<tr class="odd">
<td align="left">month</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">7.75</td>
<td align="right">5.33</td>
<td align="right">1</td>
<td align="right">1.0</td>
<td align="right">12</td>
<td align="right">12.0</td>
<td align="right">12</td>
<td align="left">▅▁▁▁▇</td>
</tr>
<tr class="even">
<td align="left">day</td>
<td align="right">0</td>
<td align="right">1.00</td>
<td align="right">16.67</td>
<td align="right">8.90</td>
<td align="right">1</td>
<td align="right">9.0</td>
<td align="right">17</td>
<td align="right">24.0</td>
<td align="right">31</td>
<td align="left">▇▇▆▇▇</td>
</tr>
</tbody>
</table>
<p>Secondly the <code>skim()</code> function returns a <code>skim</code> object that allows manipulation by <strong>dplyr</strong>.
Here it is simple to filter away all the variables without missing values.</p>
<pre class="r"><code>library(dplyr)
skim(billboards) %&gt;%
  filter(complete_rate &lt; 1)</code></pre>
<table>
<caption><span id="tab:unnamed-chunk-9">Table 2: </span>Data summary</caption>
<tbody>
<tr class="odd">
<td align="left">Name</td>
<td align="left">billboards</td>
</tr>
<tr class="even">
<td align="left">Number of rows</td>
<td align="left">387</td>
</tr>
<tr class="odd">
<td align="left">Number of columns</td>
<td align="left">13</td>
</tr>
<tr class="even">
<td align="left">_______________________</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Column type frequency:</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">numeric</td>
<td align="left">1</td>
</tr>
<tr class="odd">
<td align="left">________________________</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Group variables</td>
<td align="left">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">skim_variable</th>
<th align="right">n_missing</th>
<th align="right">complete_rate</th>
<th align="right">mean</th>
<th align="right">sd</th>
<th align="right">p0</th>
<th align="right">p25</th>
<th align="right">p50</th>
<th align="right">p75</th>
<th align="right">p100</th>
<th align="left">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">previous_week_position</td>
<td align="right">108</td>
<td align="right">0.72</td>
<td align="right">55.52</td>
<td align="right">25.15</td>
<td align="right">7</td>
<td align="right">35</td>
<td align="right">57</td>
<td align="right">75</td>
<td align="right">100</td>
<td align="left">▅▆▇▇▆</td>
</tr>
</tbody>
</table>
<p>Hopefully, we will get to revisit this wonderfully merry dataset in the future.</p>
</div>
