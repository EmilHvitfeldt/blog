---
title: "Naughty List"
author: "Emil Hvitfeldt"
slug: "16"
output: 
  html_document:
    css: "calendar.css"
showonlyimage: true
description: " "
type: packagecalendar
layout:: single
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/jquery/jquery.min.js"></script>
<link href="/rmarkdown-libs/jquery-sparkline/jquery.sparkline.css" rel="stylesheet" />
<script src="/rmarkdown-libs/jquery-sparkline/jquery.sparkline.js"></script>
<script src="/rmarkdown-libs/sparkline-binding/sparkline.js"></script>
<script src="/rmarkdown-libs/core-js/shim.min.js"></script>
<script src="/rmarkdown-libs/react/react.min.js"></script>
<script src="/rmarkdown-libs/react/react-dom.min.js"></script>
<script src="/rmarkdown-libs/reactwidget/react-tools.js"></script>
<script src="/rmarkdown-libs/reactable-binding/reactable.js"></script>


<html>
<link rel="stylesheet" href="/css/calendar-post.css"/>
</html>
<section class="navigation">
<div class="nav-container">
<nav>
<ul class="nav-list">
<li>
<a href="/">Home</a>
</li>
<li>
<a href="/packagecalendar/2019/">Back</a>
</li>
</ul>
</nav>
</div>
</section>
<div id="day-16-sparkline" class="section level1">
<h1>Day 16: Sparkline</h1>
<p>Welcome back for the 16th day of the <a href="https://twitter.com/hashtag/packagecalendar">#packagecalendar</a>,
today we will be taking a look at the <a href="https://github.com/htmlwidgets/sparkline">sparkline</a> package by <a href="https://twitter.com/timelyportfolio">Kent Russell</a>.
The <strong>sparkline</strong> package provides a wrapper around the jQuery library <a href="https://omnipotent.net/jquery.sparkline/#s-about">of the same name</a>.</p>
<p>The package is available from CRAN and can be downloaded with</p>
<pre class="r"><code>install.packages(&quot;Sparkline&quot;)</code></pre>
<p>This package is quite similar to the <a href="https://github.com/emitanaka/datalegreyar">datalegreyar</a> package from <a href="https://www.hvitfeldt.me/pkgcal2019/1/">day 1</a>.</p>
<p><strong>sparkline</strong> will take a series of numbers and create a miniature chart from them.
Here we will reuse data from <a href="https://www.hvitfeldt.me/pkgcal2019/1/">day 13</a></p>
<p>First, letâ€™s pull out a single time-series using <a href="https://dplyr.tidyverse.org/">dplyr</a>.</p>
<pre class="r"><code>library(dplyr)
holy_nights_hits &lt;- carrol_trends %&gt;%
  filter(keyword == &quot;O Holy Night&quot;) %&gt;%
  mutate(hits = as.numeric(if_else(hits == &quot;&lt;1&quot;, &quot;0&quot;, hits))) %&gt;%
  pull(hits)</code></pre>
<p>Then we simply pass the vector to the <code>sparkline()</code> function.</p>
<pre class="r"><code>library(sparkline)
sparkline(holy_nights_hits)</code></pre>
<span id="htmlwidget-1" class="sparkline html-widget"></span>
<script type="application/json" data-for="htmlwidget-1">{"x":{"values":[29,36,5,2,2,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,3,4,5,6,9,16,22,27,38,6,2,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,2,2,2,2,3,4,6,9,15,20,25,34,14,2,2,1,1,1,1,1,1,1,1,0,1,1,1,1,0,0,1,0,1,0,0,0,0,0,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,2,2,2,3,5,6,7,13,19,23,31,24,3,1,1,1,1,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,3,4,5,7,12,18,20,27,26,4,2,1,1,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,0,1,0,1,1,1,1,1,1,1,1,1,2,2,3,4,5,7,8,15,18],"options":{"height":60,"width":"100%"},"width":"100%","height":60},"evals":[],"jsHooks":[]}</script>
<p>What makes <strong>sparkline</strong>s really special is the ability for you to embed them in other applications.
In the following example, we group the data by keyword and year.
Then we have a sparkline for each year inside our table.</p>
<pre class="css"><code>.ReactTable {
  background: #2f3238;
}</code></pre>
<style type="text/css">
.ReactTable {
  background: #2f3238;
}
</style>
<pre class="r"><code>library(reactable)
library(dplyr)
library(sparkline)
library(lubridate)

data &lt;- carrol_trends %&gt;%
  mutate(hits = as.numeric(if_else(hits == &quot;&lt;1&quot;, &quot;0&quot;, hits)),
         year = year(date)) %&gt;%
  filter(year &gt; 2014) %&gt;%
  group_by(keyword, year) %&gt;%
  summarise(hits = list(hits))

reactable(data, columns = list(
  hits = colDef(cell = function(values) {
    sparkline(values)
  })
))</code></pre>
<div id="htmlwidget-2" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"keyword":["O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night"],"year":[2015,2016,2017,2018,2019,2015,2016,2017,2018,2019,2015,2016,2017,2018,2019],"hits":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,5,7,9,11,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,4,6,8,11,4],[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,5,6,8,10,7,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,4,6,8,9,8,1],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,3,6,6],[2,2,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,1,1,1,0,0,0,1,0,1,1,1,0,1,1,1,1,1,1,2,2,2,3,4,5,6,9,15,22,26,37,6],[2,1,1,1,1,1,1,1,1,1,0,1,0,0,1,0,0,0,1,1,1,0,0,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,2,2,2,2,3,4,7,8,15,19,24,34,14],[2,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,0,1,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,2,2,2,3,5,6,7,13,18,23,31,24,3],[1,1,1,1,1,1,1,0,1,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,3,4,5,7,12,17,20,27,26,4],[2,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,2,2,2,4,5,7,8,14,18],[8,5,4,4,5,4,4,4,4,3,3,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,3,4,4,4,5,5,5,5,6,7,9,11,13,17,24,39,59,66,100,21],[10,6,6,6,5,4,4,4,4,4,4,4,4,3,4,3,3,4,3,3,3,3,3,3,3,3,3,3,5,3,4,4,3,4,4,4,4,4,5,5,6,7,9,10,12,15,20,33,46,53,77,38],[10,6,5,5,4,4,4,4,4,4,3,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,4,3,4,4,4,4,4,5,5,8,8,9,12,16,20,30,44,49,61,54,8],[6,5,4,4,4,4,4,3,4,3,3,3,3,3,4,3,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,5,5,7,7,8,13,14,19,29,41,45,56,67,11],[7,7,5,5,4,3,4,3,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,3,4,4,4,5,5,6,6,8,10,14,17,21,34,39]]},"columns":[{"accessor":"keyword","name":"keyword","type":"character"},{"accessor":"year","name":"year","type":"numeric"},{"accessor":"hits","name":"hits","type":"list","cell":[{"name":"WidgetContainer","attribs":{"key":"506ba17aa00f382912a1ae3ace1a6f6f"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-472e6a01fbf55266bf2a","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-472e6a01fbf55266bf2a"},"children":["{\"x\":{\"values\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,5,7,9,11,1],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"29add7e54fe235cd74d16566284a701c"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-375be24382783e2b7db3","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-375be24382783e2b7db3"},"children":["{\"x\":{\"values\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,4,6,8,11,4],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"4acdd8a7ca90eb1404a952cce8722aad"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-d624a891bff2fee7ffc5","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-d624a891bff2fee7ffc5"},"children":["{\"x\":{\"values\":[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,5,6,8,10,7,1],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"480c6364edb3a424cf75e8777a67627d"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-f5787b895ca2f1515d25","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-f5787b895ca2f1515d25"},"children":["{\"x\":{\"values\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,2,2,4,6,8,9,8,1],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"4ec02da498bb3d6a1ee60b206a461007"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-ec18c6fe1ad43148e066","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-ec18c6fe1ad43148e066"},"children":["{\"x\":{\"values\":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,3,6,6],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"7c0d2e6011095299c7a230d000fb752a"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-0ce41477b252dde9134a","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-0ce41477b252dde9134a"},"children":["{\"x\":{\"values\":[2,2,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,1,1,1,0,0,0,1,0,1,1,1,0,1,1,1,1,1,1,2,2,2,3,4,5,6,9,15,22,26,37,6],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"44260180af0868117aad8a4089f33a40"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-64f074f9822e04230fd1","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-64f074f9822e04230fd1"},"children":["{\"x\":{\"values\":[2,1,1,1,1,1,1,1,1,1,0,1,0,0,1,0,0,0,1,1,1,0,0,1,0,1,1,1,1,1,1,0,1,1,1,1,1,1,1,2,2,2,2,3,4,7,8,15,19,24,34,14],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"a460b03f10a26886658e078d0f37ec4e"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-150295abc4ace8d65981","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-150295abc4ace8d65981"},"children":["{\"x\":{\"values\":[2,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,0,1,0,0,0,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,2,2,2,3,5,6,7,13,18,23,31,24,3],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"b8ded2ca3374240cc08beb041422a893"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-6a7889a2e0f8b3c517e7","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-6a7889a2e0f8b3c517e7"},"children":["{\"x\":{\"values\":[1,1,1,1,1,1,1,0,1,0,0,1,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,2,3,4,5,7,12,17,20,27,26,4],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"87b572e47c863b1dd0ce6b3fb9cbc7f8"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-a690919b91539487c09e","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-a690919b91539487c09e"},"children":["{\"x\":{\"values\":[2,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,1,1,0,0,1,1,1,1,1,1,1,1,2,2,2,4,5,7,8,14,18],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"465e19d8612eebd31f29273c62180312"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-e95019efa2286a9ed3cc","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-e95019efa2286a9ed3cc"},"children":["{\"x\":{\"values\":[8,5,4,4,5,4,4,4,4,3,3,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,3,4,4,4,5,5,5,5,6,7,9,11,13,17,24,39,59,66,100,21],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"5f0dfeef151696a4b9ebf02afdddfc22"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-2dd896d9eed3a388dc40","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-2dd896d9eed3a388dc40"},"children":["{\"x\":{\"values\":[10,6,6,6,5,4,4,4,4,4,4,4,4,3,4,3,3,4,3,3,3,3,3,3,3,3,3,3,5,3,4,4,3,4,4,4,4,4,5,5,6,7,9,10,12,15,20,33,46,53,77,38],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"2149dbef7815c797ac3121be92bafda5"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-743d4a242317c9f54a4b","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-743d4a242317c9f54a4b"},"children":["{\"x\":{\"values\":[10,6,5,5,4,4,4,4,4,4,3,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,4,3,4,4,4,4,4,5,5,8,8,9,12,16,20,30,44,49,61,54,8],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"87eee4d1006ecf1a052fbdf12e1a279e"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-c8c8cbde9a2a8ed17876","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-c8c8cbde9a2a8ed17876"},"children":["{\"x\":{\"values\":[6,5,4,4,4,4,4,3,4,3,3,3,3,3,4,3,3,3,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,4,4,4,5,5,7,7,8,13,14,19,29,41,45,56,67,11],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]},{"name":"WidgetContainer","attribs":{"key":"7c67542f10f18e647ea27580471e2053"},"children":[{"name":"Fragment","attribs":[],"children":[{"name":"span","attribs":{"id":"htmlwidget-9c37ca8821c7add479e3","className":"sparkline html-widget"},"children":[]},{"name":"script","attribs":{"type":"application/json","data-for":"htmlwidget-9c37ca8821c7add479e3"},"children":["{\"x\":{\"values\":[7,7,5,5,4,3,4,3,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,3,3,3,4,4,4,5,5,6,6,8,10,14,17,21,34,39],\"options\":{\"height\":20,\"width\":60},\"width\":60,\"height\":20},\"evals\":[],\"jsHooks\":[]}"]}]}]}]}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"acb5b8be0b83834b7fce59e76703f59d"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<p>This is all for today. <strong>sparkline</strong> is highly customizable and can be used in many applications.</p>
</div>
