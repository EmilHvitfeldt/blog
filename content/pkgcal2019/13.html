---
title: "Naughty List"
author: "Emil Hvitfeldt"
slug: "13"
output: 
  html_document:
    css: "calendar.css"
showonlyimage: true
description: " "
type: packagecalendar
layout:: single
---

<script src="/rmarkdown-libs/core-js/shim.min.js"></script>
<script src="/rmarkdown-libs/react/react.min.js"></script>
<script src="/rmarkdown-libs/react/react-dom.min.js"></script>
<script src="/rmarkdown-libs/reactwidget/react-tools.js"></script>
<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/reactable-binding/reactable.js"></script>


<html>
<link rel="stylesheet" href="/css/calendar-post.css"/>
</html>
<section class="navigation">
<div class="nav-container">
<nav>
<ul class="nav-list">
<li>
<a href="/">Home</a>
</li>
<li>
<a href="/packagecalendar/2019/">Back</a>
</li>
</ul>
</nav>
</div>
</section>
<div id="day-13-gtrendsr" class="section level1">
<h1>Day 13: gtrendsR</h1>
<p>Welcome back for the 13th day of the <a href="https://twitter.com/hashtag/packagecalendar">#packagecalendar</a>,
today we will be taking a look at the <a href="https://github.com/PMassicotte/gtrendsR">gtrendsR</a> by <a href="https://twitter.com/philmassicotte">Philippe Massicotte</a>.
The <strong>gtrendsR</strong> package provides an interface for retrieving and displaying <a href="https://trends.google.com/">Google Trends</a> information.</p>
<p>The package is available from CRAN, but due to recent changes to Google Trends API,
the CRAN version of the package is no longer working.
If you want to continue to query Google Trends, you have to install the development version of the package</p>
<pre class="r"><code>remotes::install_github(&quot;PMassicotte/gtrendsR&quot;)</code></pre>
<p>We have already seen the use of <strong>gtrendsR</strong> in previous posts.
The main function is <code>gtrends()</code> which contains a handful of parameters.
The main arguments are <code>keyword</code> and <code>time</code> for our purposes.
<code>keyword</code> is a character vector of the search terms you want to get the trend for.
<code>time</code> is a string specifying the span of the query, examples are</p>
<ul>
<li><code>"now 1-H"</code> - last hour</li>
<li><code>"now 4-d"</code> - last 4 days</li>
<li><code>"today 2-m"</code> - past 2 months</li>
<li><code>Y-m-d Y-m-d</code> - Time span between two dates (ex.: “2010-01-01 2010-04-03”)</li>
</ul>
<p>Let’s use the carrol names we found <a href="https://www.hvitfeldt.me/pkgcal2019/12/">yesterday</a>,
note how we are not able to pass more than 5 keywords to <code>gtrends()</code>.</p>
<pre class="r"><code>library(gtrendsR)
carrol_trends &lt;- gtrends(carrols)</code></pre>
<p>After pulling the information we get quite a lot of information back</p>
<pre class="r"><code>names(carrol_trends)
## [1] &quot;interest_over_time&quot;  &quot;interest_by_country&quot; &quot;interest_by_region&quot; 
## [4] &quot;interest_by_dma&quot;     &quot;interest_by_city&quot;    &quot;related_topics&quot;     
## [7] &quot;related_queries&quot;</code></pre>
<p>Lets first look at the interest over time</p>
<pre class="r"><code>head(carrol_trends$interest_over_time)
##         date hits   geo      time      keyword gprop category
## 1 2014-12-14   29 world today+5-y O Holy Night   web        0
## 2 2014-12-21   37 world today+5-y O Holy Night   web        0
## 3 2014-12-28    5 world today+5-y O Holy Night   web        0
## 4 2015-01-04    2 world today+5-y O Holy Night   web        0
## 5 2015-01-11    2 world today+5-y O Holy Night   web        0
## 6 2015-01-18    1 world today+5-y O Holy Night   web        0</code></pre>
<p>here we get hits as a <code>character</code> since some of the entries are <code>&lt;1</code>.
Let’s correct that and plot the values over time by keyword</p>
<pre class="r"><code>library(tidyverse)

carrol_trends$interest_over_time %&gt;%
  mutate(hits = as.numeric(if_else(hits == &quot;&lt;1&quot;, &quot;0&quot;, hits))) %&gt;%
  ggplot(aes(date, hits, color = keyword)) +
  geom_line()</code></pre>
<p><img src="/pkgcal2019/13_files/figure-html/unnamed-chunk-7-1.png" width="700px" style="display: block; margin: auto;" /></p>
<p>Note how the maximal value is 100 and every other value is proportional to that value.
Which is why we see some of the values being 0 since they appeared less than 1% of the times as the maximum.</p>
<p>We can also take a look at the related queries.
Here I have shown them using the <a href="https://glin.github.io/reactable/">reactable</a> package.</p>
<pre class="css"><code>.ReactTable {
  background: #2f3238;
}</code></pre>
<style type="text/css">
.ReactTable {
  background: #2f3238;
}
</style>
<pre class="r"><code>library(reactable)
reactable(carrol_trends$related_queries)</code></pre>
<div id="htmlwidget-1" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"subject":["100","98","39","25","25","18","17","16","16","15","14","14","13","12","12","12","11","11","11","11","10","9","9","9","9","Breakout","Breakout","Breakout","Breakout","+1,150%","+1,100%","+1,000%","+700%","+550%","+500%","+400%","+400%","+350%","+350%","+350%","+300%","+250%","+250%","+250%","+200%","+200%","+190%","+170%","+160%","+150%","100","49","22","21","21","21","19","18","16","15","12","12","12","12","11","11","10","10","10","9","9","9","9","9","9","Breakout","Breakout","Breakout","Breakout","Breakout","Breakout","Breakout","+4,450%","+4,100%","+4,050%","+3,900%","+2,100%","+1,900%","+1,650%","+750%","+450%","+400%","+350%","+350%","+300%","+250%","+250%","+200%","+140%","+140%","100","99","99","43","37","35","29","27","24","23","20","19","19","19","19","18","18","18","15","15","13","13","12","12","12","Breakout","Breakout","Breakout","Breakout","Breakout","Breakout","Breakout","Breakout","Breakout","Breakout","+3,650%","+750%","+350%","+350%","+350%","+300%","+300%","+300%","+250%","+200%","+200%","+170%","+160%","+160%","+150%"],"related_queries":["top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","top","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising","rising"],"value":["holy night lyrics","o holy night lyrics","christmas","o holy night chords","holy night chords","o holy night song","o holy night music","silent night","oh holy night","lagu o holy night","youtube o holy night","o holy night lirik","o holy night mariah","o holy night mariah carey","mariah carey","o holy night music sheet","lyrics to o holy night","download o holy night","christmas songs","o holy night josh groban","josh groban","silent night lyrics","lyrics of o holy night","o holy night piano","o holy night celine","lauren daigle o holy night","luke bryan o holy night","jordan smith o holy night","gentri o holy night","ellie goulding o holy night","home free o holy night","o holy night hometown","céline dion o holy night","hillsong worship o holy night","o holy night lyrics original","chord lagu o holy night","o holy night lurics","o holy night pentatonix","pentatonix","not angka o holy night","kunci gitar o holy night","o holy night original","chord o holy night g","jennifer nettles o holy night","o holy night pdf","o holy night music sheet pdf","o holy night versi indonesia","o holy night ukulele chords","chord gitar o holy night","serena o holy night","lyrics silent night","christmas","silent night song","holy night silent night","silent night chords","holy night","mattress","silent night mattress","silent night music","lyrics to silent night","piano silent night","christmas songs","youtube silent night","silent night youtube","lyrics of silent night","silent night deadly night","holy night lyrics","silent night holy night lyrics","not so silent night","joy to the world","jingle bells","silent night sheet music","christmas song","christmas song silent night","the song silent night","not so silent night 2018","not so silent night 2016","not so silent night 2019","not so silent night 2017","silent night airmax mattress topper","lifeline silent night apk","lifeline silent night walkthrough","not so silent night 2015 denver","lifeline silent night endings","somewhere in your silent night lyrics","not so silent night 2015","silent night anti snore pillow","lifeline silent night","somewhere in your silent night","miley cyrus silent night","chewbacca singing silent night","pentatonix silent night","pentatonix","silent night chewbacca","silent night by the temptation","silent night uke chords","hillsong silent night","chewbacca sings silent night","silent night duvet","silent night competition","o come ye all faithful lyrics","lyrics","come all ye faithful lyrics","christmas","chords o come all ye faithful","come all ye faithful chords","lyrics to o come all ye faithful","joy to the world","silent night","hark the herald","o come all ye faithful song","lyrics joy to the world","lyrics to joy to the world","hark the herald angels sing","oh come all ye faithful","lyrics of o come all ye faithful","o holy night","lyrics silent night","hark the herald lyrics","o come all ye faithful music","lyrics hark the herald angels sing","away in a manger","christmas songs","o holy night lyrics","holy night lyrics","o come all ye faithful pentatonix lyrics","o come to the altar","o come all ye faithful by pentatonix","o come to the altar lyrics","pentatonix christmas songs","download o come all ye faithful by pentatonix","voctave o come all ye faithful","o come all ye faithful we adore you lyrics","pentatonix o come all ye faithful","pentatonix","trans-siberian orchestra o come all ye faithful / o holy night","pentatonix christmas","o come all ye faithful bing crosby","o come all ye faithful rend collective","o come all ye faithful sheet music pdf","o come all ye faithful hymn lyrics","o come all ye faithful chords pdf","o come all ye faithful lyrics traditional","o come all ye faithful hymn","o come all ye faithful pdf","lirik lagu o come all ye faithful","christian christmas songs","o come all ye faithful paul baloche","mary did you know","ding dong merrily on high lyrics"],"keyword":["O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","O Holy Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","Silent Night","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful","O Come All Ye Faithful"],"category":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},"columns":[{"accessor":"subject","name":"subject","type":"character"},{"accessor":"related_queries","name":"related_queries","type":"character"},{"accessor":"value","name":"value","type":"character"},{"accessor":"keyword","name":"keyword","type":"character"},{"accessor":"category","name":"category","type":"numeric"}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"dataKey":"e93ee45259e4cd28c27b36739abfc208"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
<p>There are many more things we can look at, but this is all I have for you today!</p>
</div>
